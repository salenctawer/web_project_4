"use strict";

function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

/*
/ /= ../../node_modules/jquery/dist/jquery.js
 */
var profileContainer = document.querySelector('.profile');
var formRename = document.querySelector('.form-rename');
var closeBtn = document.querySelectorAll('.close');
var formCard = document.querySelector('.form-card');

var saveInfo = function saveInfo(nameValue, descriptionValue) {
  profileContainer.querySelector('.profile-info__name').textContent = nameValue;
  profileContainer.querySelector('.profile-info__description').textContent = descriptionValue;
};

var openInfo = function openInfo(inputNameValue, inputDescriptionValue) {
  formRename.querySelector('#form-name').value = inputNameValue;
  formRename.querySelector('#form-description').value = inputDescriptionValue;
};

var closeFunction = function closeFunction() {
  var _iterator = _createForOfIteratorHelper(closeBtn),
      _step;

  try {
    for (_iterator.s(); !(_step = _iterator.n()).done;) {
      var close = _step.value;
      close.addEventListener('click', function () {
        formRename.classList.remove('--active');
        formCard.classList.remove('--active');
      });
    }
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }
};

profileContainer.querySelector('.profile-info__button').addEventListener('click', function () {
  var nameInput = formRename.querySelector('#form-name');
  var descriptionInput = formRename.querySelector('#form-description');
  var nameProfile = profileContainer.querySelector('.profile-info__name');
  var descriptionProfile = profileContainer.querySelector('.profile-info__description');
  openInfo(nameProfile.textContent, descriptionProfile.textContent);
  formRename.classList.add('--active');
  closeFunction();
  formRename.addEventListener('submit', function (e) {
    e.preventDefault();
    saveInfo(nameInput.value, descriptionInput.value);
    formRename.classList.remove('--active');
  });
});
var initialCards = [{
  name: 'Lago di Braies',
  link: 'https://code.s3.yandex.net/web-code/lago.jpg'
}, {
  name: 'Vanoise National Park',
  link: 'https://code.s3.yandex.net/web-code/vanoise.jpg'
}, {
  name: 'Latemar',
  link: 'https://code.s3.yandex.net/web-code/latemar.jpg'
}, {
  name: 'Bald Mountains',
  link: 'https://code.s3.yandex.net/web-code/bald-mountains.jpg'
}, {
  name: 'Lake Louise',
  link: 'https://code.s3.yandex.net/web-code/lake-louise.jpg'
}, {
  name: 'Yosemite Valley',
  link: 'https://code.s3.yandex.net/web-code/yosemite.jpg'
}];

var addNewCard = function addNewCard(elementLink, elementName) {
  var cardTemplate = document.querySelector('#card-template').content;
  var cardElement = cardTemplate.querySelector('.grid-element').cloneNode(true);
  cardElement.querySelector('.grid-element__img').style.backgroundImage = 'url(' + elementLink + ')';
  cardElement.querySelector('.title').textContent = elementName;
  document.querySelector('.grid').prepend(cardElement);
  cardElement.querySelector('.grid-element__trash').addEventListener('click', function (e) {
    e.stopPropagation();
    e.target.parentNode.parentNode.parentNode.removeChild(e.target.parentNode.parentNode);
  });
  cardElement.querySelector('.grid-element__like').addEventListener('click', function (e) {
    e.target.classList.toggle('grid-element__like_active');
  });
};

var addCard = function addCard() {
  initialCards.forEach(function (element) {
    addNewCard(element.link, element.name);
  });
};

addCard();
profileContainer.querySelector('.add-button').addEventListener('click', function () {
  formCard.classList.add('--active');
  closeFunction();
});
formCard.addEventListener('submit', function (e) {
  var titleCard = formCard.querySelector('#card-title');
  var linkCard = formCard.querySelector('#card-link');
  addNewCard(linkCard.value, titleCard.value);
  e.preventDefault();
  formCard.classList.remove('--active');
});

var openPhoto = function openPhoto(photoLink, photoTitle) {
  var photoTemplate = document.querySelector('#photo-template').content;
  var photoContent = photoTemplate.querySelector('.photo-content').cloneNode(true);
  photoContent.querySelector('.photo-element__img').style.backgroundImage = photoLink;
  photoContent.querySelector('.photo-element__title').textContent = photoTitle;
  var closePhoto = photoContent.querySelector('.close');
  closePhoto.addEventListener('click', function () {
    closePhoto.parentNode.parentNode.parentNode.parentNode.parentNode.removeChild(closePhoto.parentNode.parentNode.parentNode.parentNode);
  });
  document.querySelector('.body').prepend(photoContent);
};

var clickPhoto = function clickPhoto() {
  var photoGrid = document.querySelectorAll('.grid-element__img');

  var _iterator2 = _createForOfIteratorHelper(photoGrid),
      _step2;

  try {
    var _loop = function _loop() {
      var photo = _step2.value;
      photo.addEventListener('click', function () {
        var srcContainer = photo.style.backgroundImage;
        var titleGrid = document.querySelector('.grid-element .title').textContent;
        openPhoto(srcContainer, titleGrid);
      });
    };

    for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
      _loop();
    }
  } catch (err) {
    _iterator2.e(err);
  } finally {
    _iterator2.f();
  }
};

clickPhoto(); // enableValidation({
//     formSelector: '.popup__form',
//     inputSelector: '.form__input',
//     submitButtonSelector: '.form__button',
//     inactiveButtonClass: 'form__button_disabled',
//     inputErrorClass: 'form__input_type_error',
//     errorClass: 'form__error_visible'
// }); 

var form = document.querySelector('.popup__form');
var formInput = form.querySelector('.form__input');
var formError = form.querySelector(".".concat(formInput.id, "-error"));

var showInputError = function showInputError(formElement, inputElement, errorMessage) {
  var errorElement = formElement.querySelector(".".concat(inputElement.id, "-error"));
  inputElement.classList.add('form__input_type_error');
  errorElement.textContent = errorMessage;
  errorElement.classList.add('form__input-error_active');
};

var hideInputError = function hideInputError(formElement, inputElement) {
  var errorElement = formElement.querySelector(".".concat(inputElement.id, "-error"));
  inputElement.classList.remove('form__input_type_error');
  errorElement.classList.remove('form__input-error_active');
  errorElement.textContent = '';
};

var checkInputValidity = function checkInputValidity(formElement, inputElement) {
  if (!inputElement.validity.valid) {
    showInputError(formElement, inputElement, inputElement.validationMessage);
  } else {
    hideInputError(formElement, inputElement);
  }
};

var setEventListeners = function setEventListeners(formElement) {
  var inputList = Array.from(formElement.querySelectorAll('.form__input'));
  inputList.forEach(function (inputElement) {
    inputElement.addEventListener('input', function () {
      checkInputValidity(formElement, inputElement);
    });
  });
};

var enableValidation = function enableValidation() {
  var formList = Array.from(document.querySelectorAll('.form'));
  formList.forEach(function (formElement) {
    formElement.addEventListener('submit', function (evt) {
      evt.preventDefault();
    });
    setEventListeners(formElement);
  });
};

enableValidation();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbInByb2ZpbGVDb250YWluZXIiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJmb3JtUmVuYW1lIiwiY2xvc2VCdG4iLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9ybUNhcmQiLCJzYXZlSW5mbyIsIm5hbWVWYWx1ZSIsImRlc2NyaXB0aW9uVmFsdWUiLCJ0ZXh0Q29udGVudCIsIm9wZW5JbmZvIiwiaW5wdXROYW1lVmFsdWUiLCJpbnB1dERlc2NyaXB0aW9uVmFsdWUiLCJ2YWx1ZSIsImNsb3NlRnVuY3Rpb24iLCJjbG9zZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJuYW1lSW5wdXQiLCJkZXNjcmlwdGlvbklucHV0IiwibmFtZVByb2ZpbGUiLCJkZXNjcmlwdGlvblByb2ZpbGUiLCJhZGQiLCJlIiwicHJldmVudERlZmF1bHQiLCJpbml0aWFsQ2FyZHMiLCJuYW1lIiwibGluayIsImFkZE5ld0NhcmQiLCJlbGVtZW50TGluayIsImVsZW1lbnROYW1lIiwiY2FyZFRlbXBsYXRlIiwiY29udGVudCIsImNhcmRFbGVtZW50IiwiY2xvbmVOb2RlIiwic3R5bGUiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJwcmVwZW5kIiwic3RvcFByb3BhZ2F0aW9uIiwidGFyZ2V0IiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwidG9nZ2xlIiwiYWRkQ2FyZCIsImZvckVhY2giLCJlbGVtZW50IiwidGl0bGVDYXJkIiwibGlua0NhcmQiLCJvcGVuUGhvdG8iLCJwaG90b0xpbmsiLCJwaG90b1RpdGxlIiwicGhvdG9UZW1wbGF0ZSIsInBob3RvQ29udGVudCIsImNsb3NlUGhvdG8iLCJjbGlja1Bob3RvIiwicGhvdG9HcmlkIiwicGhvdG8iLCJzcmNDb250YWluZXIiLCJ0aXRsZUdyaWQiLCJmb3JtIiwiZm9ybUlucHV0IiwiZm9ybUVycm9yIiwiaWQiLCJzaG93SW5wdXRFcnJvciIsImZvcm1FbGVtZW50IiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiaGlkZUlucHV0RXJyb3IiLCJjaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJzZXRFdmVudExpc3RlbmVycyIsImlucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsImVuYWJsZVZhbGlkYXRpb24iLCJmb3JtTGlzdCIsImV2dCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQSxJQUFNQSxnQkFBZ0IsR0FBR0MsUUFBUSxDQUFDQyxhQUFULENBQXVCLFVBQXZCLENBQXpCO0FBQ0EsSUFBTUMsVUFBVSxHQUFHRixRQUFRLENBQUNDLGFBQVQsQ0FBdUIsY0FBdkIsQ0FBbkI7QUFDQSxJQUFNRSxRQUFRLEdBQUdILFFBQVEsQ0FBQ0ksZ0JBQVQsQ0FBMEIsUUFBMUIsQ0FBakI7QUFDQSxJQUFNQyxRQUFRLEdBQUdMLFFBQVEsQ0FBQ0MsYUFBVCxDQUF1QixZQUF2QixDQUFqQjs7QUFFQSxJQUFJSyxRQUFRLEdBQUcsU0FBWEEsUUFBVyxDQUFDQyxTQUFELEVBQVlDLGdCQUFaLEVBQWdDO0FBQzNDVCxFQUFBQSxnQkFBZ0IsQ0FBQ0UsYUFBakIsQ0FBK0IscUJBQS9CLEVBQXNEUSxXQUF0RCxHQUFvRUYsU0FBcEU7QUFDQVIsRUFBQUEsZ0JBQWdCLENBQUNFLGFBQWpCLENBQStCLDRCQUEvQixFQUE2RFEsV0FBN0QsR0FBMkVELGdCQUEzRTtBQUNILENBSEQ7O0FBSUEsSUFBSUUsUUFBUSxHQUFHLFNBQVhBLFFBQVcsQ0FBQ0MsY0FBRCxFQUFpQkMscUJBQWpCLEVBQTBDO0FBQ3JEVixFQUFBQSxVQUFVLENBQUNELGFBQVgsQ0FBeUIsWUFBekIsRUFBdUNZLEtBQXZDLEdBQStDRixjQUEvQztBQUNBVCxFQUFBQSxVQUFVLENBQUNELGFBQVgsQ0FBeUIsbUJBQXpCLEVBQThDWSxLQUE5QyxHQUFzREQscUJBQXREO0FBQ0gsQ0FIRDs7QUFJQSxJQUFJRSxhQUFhLEdBQUcsU0FBaEJBLGFBQWdCLEdBQUs7QUFBQSw2Q0FDSFgsUUFERztBQUFBOztBQUFBO0FBQ3JCLHdEQUEyQjtBQUFBLFVBQWxCWSxLQUFrQjtBQUN2QkEsTUFBQUEsS0FBSyxDQUFDQyxnQkFBTixDQUF1QixPQUF2QixFQUFnQyxZQUFJO0FBQ2hDZCxRQUFBQSxVQUFVLENBQUNlLFNBQVgsQ0FBcUJDLE1BQXJCLENBQTRCLFVBQTVCO0FBQ0FiLFFBQUFBLFFBQVEsQ0FBQ1ksU0FBVCxDQUFtQkMsTUFBbkIsQ0FBMEIsVUFBMUI7QUFDSCxPQUhEO0FBSUg7QUFOb0I7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQU94QixDQVBEOztBQVFBbkIsZ0JBQWdCLENBQUNFLGFBQWpCLENBQStCLHVCQUEvQixFQUF3RGUsZ0JBQXhELENBQXlFLE9BQXpFLEVBQWtGLFlBQUk7QUFDbEYsTUFBTUcsU0FBUyxHQUFHakIsVUFBVSxDQUFDRCxhQUFYLENBQXlCLFlBQXpCLENBQWxCO0FBQ0EsTUFBTW1CLGdCQUFnQixHQUFHbEIsVUFBVSxDQUFDRCxhQUFYLENBQXlCLG1CQUF6QixDQUF6QjtBQUNBLE1BQU1vQixXQUFXLEdBQUd0QixnQkFBZ0IsQ0FBQ0UsYUFBakIsQ0FBK0IscUJBQS9CLENBQXBCO0FBQ0EsTUFBTXFCLGtCQUFrQixHQUFHdkIsZ0JBQWdCLENBQUNFLGFBQWpCLENBQStCLDRCQUEvQixDQUEzQjtBQUNBUyxFQUFBQSxRQUFRLENBQUNXLFdBQVcsQ0FBQ1osV0FBYixFQUEwQmEsa0JBQWtCLENBQUNiLFdBQTdDLENBQVI7QUFDQVAsRUFBQUEsVUFBVSxDQUFDZSxTQUFYLENBQXFCTSxHQUFyQixDQUF5QixVQUF6QjtBQUNBVCxFQUFBQSxhQUFhO0FBQ2JaLEVBQUFBLFVBQVUsQ0FBQ2MsZ0JBQVgsQ0FBNEIsUUFBNUIsRUFBc0MsVUFBQ1EsQ0FBRCxFQUFLO0FBQ3ZDQSxJQUFBQSxDQUFDLENBQUNDLGNBQUY7QUFDQW5CLElBQUFBLFFBQVEsQ0FBQ2EsU0FBUyxDQUFDTixLQUFYLEVBQWtCTyxnQkFBZ0IsQ0FBQ1AsS0FBbkMsQ0FBUjtBQUNBWCxJQUFBQSxVQUFVLENBQUNlLFNBQVgsQ0FBcUJDLE1BQXJCLENBQTRCLFVBQTVCO0FBQ0gsR0FKRDtBQUtILENBYkQ7QUFlQSxJQUFJUSxZQUFZLEdBQUcsQ0FDZjtBQUNJQyxFQUFBQSxJQUFJLEVBQUUsZ0JBRFY7QUFFSUMsRUFBQUEsSUFBSSxFQUFFO0FBRlYsQ0FEZSxFQUtmO0FBQ0lELEVBQUFBLElBQUksRUFBRSx1QkFEVjtBQUVJQyxFQUFBQSxJQUFJLEVBQUU7QUFGVixDQUxlLEVBU2Y7QUFDSUQsRUFBQUEsSUFBSSxFQUFFLFNBRFY7QUFFSUMsRUFBQUEsSUFBSSxFQUFFO0FBRlYsQ0FUZSxFQWFmO0FBQ0lELEVBQUFBLElBQUksRUFBRSxnQkFEVjtBQUVJQyxFQUFBQSxJQUFJLEVBQUU7QUFGVixDQWJlLEVBaUJmO0FBQ0lELEVBQUFBLElBQUksRUFBRSxhQURWO0FBRUlDLEVBQUFBLElBQUksRUFBRTtBQUZWLENBakJlLEVBcUJmO0FBQ0lELEVBQUFBLElBQUksRUFBRSxpQkFEVjtBQUVJQyxFQUFBQSxJQUFJLEVBQUU7QUFGVixDQXJCZSxDQUFuQjs7QUEwQkEsSUFBSUMsVUFBVSxHQUFHLFNBQWJBLFVBQWEsQ0FBQ0MsV0FBRCxFQUFjQyxXQUFkLEVBQTZCO0FBQzFDLE1BQU1DLFlBQVksR0FBR2hDLFFBQVEsQ0FBQ0MsYUFBVCxDQUF1QixnQkFBdkIsRUFBeUNnQyxPQUE5RDtBQUNBLE1BQU1DLFdBQVcsR0FBR0YsWUFBWSxDQUFDL0IsYUFBYixDQUEyQixlQUEzQixFQUE0Q2tDLFNBQTVDLENBQXNELElBQXRELENBQXBCO0FBQ0FELEVBQUFBLFdBQVcsQ0FBQ2pDLGFBQVosQ0FBMEIsb0JBQTFCLEVBQWdEbUMsS0FBaEQsQ0FBc0RDLGVBQXRELEdBQXdFLFNBQVFQLFdBQVIsR0FBc0IsR0FBOUY7QUFDQUksRUFBQUEsV0FBVyxDQUFDakMsYUFBWixDQUEwQixRQUExQixFQUFvQ1EsV0FBcEMsR0FBa0RzQixXQUFsRDtBQUNBL0IsRUFBQUEsUUFBUSxDQUFDQyxhQUFULENBQXVCLE9BQXZCLEVBQWdDcUMsT0FBaEMsQ0FBd0NKLFdBQXhDO0FBQ0FBLEVBQUFBLFdBQVcsQ0FBQ2pDLGFBQVosQ0FBMEIsc0JBQTFCLEVBQWtEZSxnQkFBbEQsQ0FBbUUsT0FBbkUsRUFBNEUsVUFBQ1EsQ0FBRCxFQUFLO0FBQzdFQSxJQUFBQSxDQUFDLENBQUNlLGVBQUY7QUFDQWYsSUFBQUEsQ0FBQyxDQUFDZ0IsTUFBRixDQUFTQyxVQUFULENBQW9CQSxVQUFwQixDQUErQkEsVUFBL0IsQ0FBMENDLFdBQTFDLENBQXNEbEIsQ0FBQyxDQUFDZ0IsTUFBRixDQUFTQyxVQUFULENBQW9CQSxVQUExRTtBQUNILEdBSEQ7QUFJQVAsRUFBQUEsV0FBVyxDQUFDakMsYUFBWixDQUEwQixxQkFBMUIsRUFBaURlLGdCQUFqRCxDQUFrRSxPQUFsRSxFQUEyRSxVQUFDUSxDQUFELEVBQU07QUFDN0VBLElBQUFBLENBQUMsQ0FBQ2dCLE1BQUYsQ0FBU3ZCLFNBQVQsQ0FBbUIwQixNQUFuQixDQUEwQiwyQkFBMUI7QUFDSCxHQUZEO0FBR0gsQ0FiRDs7QUFjQSxJQUFJQyxPQUFPLEdBQUcsU0FBVkEsT0FBVSxHQUFLO0FBQ2ZsQixFQUFBQSxZQUFZLENBQUNtQixPQUFiLENBQXFCLFVBQUFDLE9BQU8sRUFBSTtBQUM1QmpCLElBQUFBLFVBQVUsQ0FBQ2lCLE9BQU8sQ0FBQ2xCLElBQVQsRUFBZWtCLE9BQU8sQ0FBQ25CLElBQXZCLENBQVY7QUFDSCxHQUZEO0FBR0gsQ0FKRDs7QUFLQWlCLE9BQU87QUFHUDdDLGdCQUFnQixDQUFDRSxhQUFqQixDQUErQixhQUEvQixFQUE4Q2UsZ0JBQTlDLENBQStELE9BQS9ELEVBQXdFLFlBQUk7QUFDeEVYLEVBQUFBLFFBQVEsQ0FBQ1ksU0FBVCxDQUFtQk0sR0FBbkIsQ0FBdUIsVUFBdkI7QUFDQVQsRUFBQUEsYUFBYTtBQUNoQixDQUhEO0FBS0FULFFBQVEsQ0FBQ1csZ0JBQVQsQ0FBMEIsUUFBMUIsRUFBb0MsVUFBQ1EsQ0FBRCxFQUFLO0FBQ3JDLE1BQU11QixTQUFTLEdBQUcxQyxRQUFRLENBQUNKLGFBQVQsQ0FBdUIsYUFBdkIsQ0FBbEI7QUFDQSxNQUFNK0MsUUFBUSxHQUFHM0MsUUFBUSxDQUFDSixhQUFULENBQXVCLFlBQXZCLENBQWpCO0FBQ0E0QixFQUFBQSxVQUFVLENBQUNtQixRQUFRLENBQUNuQyxLQUFWLEVBQWlCa0MsU0FBUyxDQUFDbEMsS0FBM0IsQ0FBVjtBQUNBVyxFQUFBQSxDQUFDLENBQUNDLGNBQUY7QUFDQXBCLEVBQUFBLFFBQVEsQ0FBQ1ksU0FBVCxDQUFtQkMsTUFBbkIsQ0FBMEIsVUFBMUI7QUFDSCxDQU5EOztBQVFBLElBQUkrQixTQUFTLEdBQUcsU0FBWkEsU0FBWSxDQUFDQyxTQUFELEVBQVlDLFVBQVosRUFBMEI7QUFDdEMsTUFBTUMsYUFBYSxHQUFHcEQsUUFBUSxDQUFDQyxhQUFULENBQXVCLGlCQUF2QixFQUEwQ2dDLE9BQWhFO0FBQ0EsTUFBTW9CLFlBQVksR0FBR0QsYUFBYSxDQUFDbkQsYUFBZCxDQUE0QixnQkFBNUIsRUFBOENrQyxTQUE5QyxDQUF3RCxJQUF4RCxDQUFyQjtBQUNBa0IsRUFBQUEsWUFBWSxDQUFDcEQsYUFBYixDQUEyQixxQkFBM0IsRUFBa0RtQyxLQUFsRCxDQUF3REMsZUFBeEQsR0FBMEVhLFNBQTFFO0FBQ0FHLEVBQUFBLFlBQVksQ0FBQ3BELGFBQWIsQ0FBMkIsdUJBQTNCLEVBQW9EUSxXQUFwRCxHQUFrRTBDLFVBQWxFO0FBQ0EsTUFBTUcsVUFBVSxHQUFHRCxZQUFZLENBQUNwRCxhQUFiLENBQTJCLFFBQTNCLENBQW5CO0FBQ0FxRCxFQUFBQSxVQUFVLENBQUN0QyxnQkFBWCxDQUE0QixPQUE1QixFQUFxQyxZQUFJO0FBQ3JDc0MsSUFBQUEsVUFBVSxDQUFDYixVQUFYLENBQXNCQSxVQUF0QixDQUFpQ0EsVUFBakMsQ0FBNENBLFVBQTVDLENBQXVEQSxVQUF2RCxDQUFrRUMsV0FBbEUsQ0FBOEVZLFVBQVUsQ0FBQ2IsVUFBWCxDQUFzQkEsVUFBdEIsQ0FBaUNBLFVBQWpDLENBQTRDQSxVQUExSDtBQUVILEdBSEQ7QUFJQXpDLEVBQUFBLFFBQVEsQ0FBQ0MsYUFBVCxDQUF1QixPQUF2QixFQUFnQ3FDLE9BQWhDLENBQXdDZSxZQUF4QztBQUNILENBWEQ7O0FBWUEsSUFBSUUsVUFBVSxHQUFHLFNBQWJBLFVBQWEsR0FBSztBQUNsQixNQUFNQyxTQUFTLEdBQUd4RCxRQUFRLENBQUNJLGdCQUFULENBQTBCLG9CQUExQixDQUFsQjs7QUFEa0IsOENBRUFvRCxTQUZBO0FBQUE7O0FBQUE7QUFBQTtBQUFBLFVBRVRDLEtBRlM7QUFHZEEsTUFBQUEsS0FBSyxDQUFDekMsZ0JBQU4sQ0FBdUIsT0FBdkIsRUFBZ0MsWUFBSTtBQUNoQyxZQUFNMEMsWUFBWSxHQUFHRCxLQUFLLENBQUNyQixLQUFOLENBQVlDLGVBQWpDO0FBQ0EsWUFBTXNCLFNBQVMsR0FBRzNELFFBQVEsQ0FBQ0MsYUFBVCxDQUF1QixzQkFBdkIsRUFBK0NRLFdBQWpFO0FBQ0F3QyxRQUFBQSxTQUFTLENBQUNTLFlBQUQsRUFBZUMsU0FBZixDQUFUO0FBQ0gsT0FKRDtBQUhjOztBQUVsQiwyREFBNEI7QUFBQTtBQU0zQjtBQVJpQjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBU3JCLENBVEQ7O0FBV0FKLFVBQVUsRyxDQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0EsSUFBTUssSUFBSSxHQUFHNUQsUUFBUSxDQUFDQyxhQUFULENBQXVCLGNBQXZCLENBQWI7QUFDQSxJQUFNNEQsU0FBUyxHQUFHRCxJQUFJLENBQUMzRCxhQUFMLENBQW1CLGNBQW5CLENBQWxCO0FBQ0EsSUFBTTZELFNBQVMsR0FBR0YsSUFBSSxDQUFDM0QsYUFBTCxZQUF1QjRELFNBQVMsQ0FBQ0UsRUFBakMsWUFBbEI7O0FBRUEsSUFBTUMsY0FBYyxHQUFHLFNBQWpCQSxjQUFpQixDQUFDQyxXQUFELEVBQWNDLFlBQWQsRUFBNEJDLFlBQTVCLEVBQTZDO0FBQ2xFLE1BQU1DLFlBQVksR0FBR0gsV0FBVyxDQUFDaEUsYUFBWixZQUE4QmlFLFlBQVksQ0FBQ0gsRUFBM0MsWUFBckI7QUFDQUcsRUFBQUEsWUFBWSxDQUFDakQsU0FBYixDQUF1Qk0sR0FBdkIsQ0FBMkIsd0JBQTNCO0FBQ0E2QyxFQUFBQSxZQUFZLENBQUMzRCxXQUFiLEdBQTJCMEQsWUFBM0I7QUFDQUMsRUFBQUEsWUFBWSxDQUFDbkQsU0FBYixDQUF1Qk0sR0FBdkIsQ0FBMkIsMEJBQTNCO0FBQ0QsQ0FMRDs7QUFPQSxJQUFNOEMsY0FBYyxHQUFHLFNBQWpCQSxjQUFpQixDQUFDSixXQUFELEVBQWNDLFlBQWQsRUFBK0I7QUFDcEQsTUFBTUUsWUFBWSxHQUFHSCxXQUFXLENBQUNoRSxhQUFaLFlBQThCaUUsWUFBWSxDQUFDSCxFQUEzQyxZQUFyQjtBQUNBRyxFQUFBQSxZQUFZLENBQUNqRCxTQUFiLENBQXVCQyxNQUF2QixDQUE4Qix3QkFBOUI7QUFDQWtELEVBQUFBLFlBQVksQ0FBQ25ELFNBQWIsQ0FBdUJDLE1BQXZCLENBQThCLDBCQUE5QjtBQUNBa0QsRUFBQUEsWUFBWSxDQUFDM0QsV0FBYixHQUEyQixFQUEzQjtBQUNELENBTEQ7O0FBT0EsSUFBTTZELGtCQUFrQixHQUFHLFNBQXJCQSxrQkFBcUIsQ0FBQ0wsV0FBRCxFQUFjQyxZQUFkLEVBQStCO0FBQ3hELE1BQUksQ0FBQ0EsWUFBWSxDQUFDSyxRQUFiLENBQXNCQyxLQUEzQixFQUFrQztBQUNoQ1IsSUFBQUEsY0FBYyxDQUFDQyxXQUFELEVBQWNDLFlBQWQsRUFBNEJBLFlBQVksQ0FBQ08saUJBQXpDLENBQWQ7QUFDRCxHQUZELE1BRU87QUFDTEosSUFBQUEsY0FBYyxDQUFDSixXQUFELEVBQWNDLFlBQWQsQ0FBZDtBQUNEO0FBQ0YsQ0FORDs7QUFRQSxJQUFNUSxpQkFBaUIsR0FBRyxTQUFwQkEsaUJBQW9CLENBQUNULFdBQUQsRUFBaUI7QUFDekMsTUFBTVUsU0FBUyxHQUFHQyxLQUFLLENBQUNDLElBQU4sQ0FBV1osV0FBVyxDQUFDN0QsZ0JBQVosQ0FBNkIsY0FBN0IsQ0FBWCxDQUFsQjtBQUNBdUUsRUFBQUEsU0FBUyxDQUFDOUIsT0FBVixDQUFrQixVQUFDcUIsWUFBRCxFQUFrQjtBQUNsQ0EsSUFBQUEsWUFBWSxDQUFDbEQsZ0JBQWIsQ0FBOEIsT0FBOUIsRUFBdUMsWUFBWTtBQUNqRHNELE1BQUFBLGtCQUFrQixDQUFDTCxXQUFELEVBQWNDLFlBQWQsQ0FBbEI7QUFDRCxLQUZEO0FBR0QsR0FKRDtBQUtELENBUEQ7O0FBUUEsSUFBTVksZ0JBQWdCLEdBQUcsU0FBbkJBLGdCQUFtQixHQUFNO0FBQzdCLE1BQU1DLFFBQVEsR0FBR0gsS0FBSyxDQUFDQyxJQUFOLENBQVc3RSxRQUFRLENBQUNJLGdCQUFULENBQTBCLE9BQTFCLENBQVgsQ0FBakI7QUFDQTJFLEVBQUFBLFFBQVEsQ0FBQ2xDLE9BQVQsQ0FBaUIsVUFBQ29CLFdBQUQsRUFBaUI7QUFDaENBLElBQUFBLFdBQVcsQ0FBQ2pELGdCQUFaLENBQTZCLFFBQTdCLEVBQXVDLFVBQUNnRSxHQUFELEVBQVM7QUFDOUNBLE1BQUFBLEdBQUcsQ0FBQ3ZELGNBQUo7QUFDRCxLQUZEO0FBR0FpRCxJQUFBQSxpQkFBaUIsQ0FBQ1QsV0FBRCxDQUFqQjtBQUNELEdBTEQ7QUFNRCxDQVJEOztBQVNBYSxnQkFBZ0IiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLypcclxuLyAvPSAuLi8uLi9ub2RlX21vZHVsZXMvanF1ZXJ5L2Rpc3QvanF1ZXJ5LmpzXHJcbiAqL1xyXG5jb25zdCBwcm9maWxlQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGUnKTtcclxuY29uc3QgZm9ybVJlbmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtLXJlbmFtZScpO1xyXG5jb25zdCBjbG9zZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jbG9zZScpO1xyXG5jb25zdCBmb3JtQ2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtLWNhcmQnKTtcclxuXHJcbmxldCBzYXZlSW5mbyA9IChuYW1lVmFsdWUsIGRlc2NyaXB0aW9uVmFsdWUpID0+e1xyXG4gICAgcHJvZmlsZUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZS1pbmZvX19uYW1lJykudGV4dENvbnRlbnQgPSBuYW1lVmFsdWU7XHJcbiAgICBwcm9maWxlQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlLWluZm9fX2Rlc2NyaXB0aW9uJykudGV4dENvbnRlbnQgPSBkZXNjcmlwdGlvblZhbHVlO1xyXG59O1xyXG5sZXQgb3BlbkluZm8gPSAoaW5wdXROYW1lVmFsdWUsIGlucHV0RGVzY3JpcHRpb25WYWx1ZSkgPT57XHJcbiAgICBmb3JtUmVuYW1lLnF1ZXJ5U2VsZWN0b3IoJyNmb3JtLW5hbWUnKS52YWx1ZSA9IGlucHV0TmFtZVZhbHVlO1xyXG4gICAgZm9ybVJlbmFtZS5xdWVyeVNlbGVjdG9yKCcjZm9ybS1kZXNjcmlwdGlvbicpLnZhbHVlID0gaW5wdXREZXNjcmlwdGlvblZhbHVlO1xyXG59O1xyXG5sZXQgY2xvc2VGdW5jdGlvbiA9ICgpID0+e1xyXG4gICAgZm9yIChsZXQgY2xvc2Ugb2YgY2xvc2VCdG4pe1xyXG4gICAgICAgIGNsb3NlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PntcclxuICAgICAgICAgICAgZm9ybVJlbmFtZS5jbGFzc0xpc3QucmVtb3ZlKCctLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICBmb3JtQ2FyZC5jbGFzc0xpc3QucmVtb3ZlKCctLWFjdGl2ZScpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59O1xyXG5wcm9maWxlQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlLWluZm9fX2J1dHRvbicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PntcclxuICAgIGNvbnN0IG5hbWVJbnB1dCA9IGZvcm1SZW5hbWUucXVlcnlTZWxlY3RvcignI2Zvcm0tbmFtZScpO1xyXG4gICAgY29uc3QgZGVzY3JpcHRpb25JbnB1dCA9IGZvcm1SZW5hbWUucXVlcnlTZWxlY3RvcignI2Zvcm0tZGVzY3JpcHRpb24nKTtcclxuICAgIGNvbnN0IG5hbWVQcm9maWxlID0gcHJvZmlsZUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZS1pbmZvX19uYW1lJyk7XHJcbiAgICBjb25zdCBkZXNjcmlwdGlvblByb2ZpbGUgPSBwcm9maWxlQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlLWluZm9fX2Rlc2NyaXB0aW9uJyk7XHJcbiAgICBvcGVuSW5mbyhuYW1lUHJvZmlsZS50ZXh0Q29udGVudCwgZGVzY3JpcHRpb25Qcm9maWxlLnRleHRDb250ZW50KTtcclxuICAgIGZvcm1SZW5hbWUuY2xhc3NMaXN0LmFkZCgnLS1hY3RpdmUnKTtcclxuICAgIGNsb3NlRnVuY3Rpb24oKTtcclxuICAgIGZvcm1SZW5hbWUuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGUpPT57XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHNhdmVJbmZvKG5hbWVJbnB1dC52YWx1ZSwgZGVzY3JpcHRpb25JbnB1dC52YWx1ZSk7XHJcbiAgICAgICAgZm9ybVJlbmFtZS5jbGFzc0xpc3QucmVtb3ZlKCctLWFjdGl2ZScpO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxubGV0IGluaXRpYWxDYXJkcyA9IFtcclxuICAgIHtcclxuICAgICAgICBuYW1lOiAnTGFnbyBkaSBCcmFpZXMnLFxyXG4gICAgICAgIGxpbms6ICdodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWdvLmpwZydcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgbmFtZTogJ1Zhbm9pc2UgTmF0aW9uYWwgUGFyaycsXHJcbiAgICAgICAgbGluazogJ2h0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3Zhbm9pc2UuanBnJ1xyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBuYW1lOiAnTGF0ZW1hcicsXHJcbiAgICAgICAgbGluazogJ2h0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhdGVtYXIuanBnJ1xyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBuYW1lOiAnQmFsZCBNb3VudGFpbnMnLFxyXG4gICAgICAgIGxpbms6ICdodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9iYWxkLW1vdW50YWlucy5qcGcnXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIG5hbWU6ICdMYWtlIExvdWlzZScsXHJcbiAgICAgICAgbGluazogJ2h0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xha2UtbG91aXNlLmpwZydcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgbmFtZTogJ1lvc2VtaXRlIFZhbGxleScsXHJcbiAgICAgICAgbGluazogJ2h0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3lvc2VtaXRlLmpwZydcclxuICAgIH1cclxuXTsgXHJcbmxldCBhZGROZXdDYXJkID0gKGVsZW1lbnRMaW5rLCBlbGVtZW50TmFtZSkgPT57XHJcbiAgICBjb25zdCBjYXJkVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2FyZC10ZW1wbGF0ZScpLmNvbnRlbnQ7XHJcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmRUZW1wbGF0ZS5xdWVyeVNlbGVjdG9yKCcuZ3JpZC1lbGVtZW50JykuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmdyaWQtZWxlbWVudF9faW1nJykuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gJ3VybCgnKyBlbGVtZW50TGluayArICcpJztcclxuICAgIGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy50aXRsZScpLnRleHRDb250ZW50ID0gZWxlbWVudE5hbWU7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ3JpZCcpLnByZXBlbmQoY2FyZEVsZW1lbnQpO1xyXG4gICAgY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmdyaWQtZWxlbWVudF9fdHJhc2gnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKT0+e1xyXG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgZS50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZS50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlKTtcclxuICAgIH0pO1xyXG4gICAgY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmdyaWQtZWxlbWVudF9fbGlrZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpPT4ge1xyXG4gICAgICAgIGUudGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoJ2dyaWQtZWxlbWVudF9fbGlrZV9hY3RpdmUnKTtcclxuICAgIH0pO1xyXG59O1xyXG5sZXQgYWRkQ2FyZCA9ICgpID0+e1xyXG4gICAgaW5pdGlhbENhcmRzLmZvckVhY2goZWxlbWVudCA9PiB7XHJcbiAgICAgICAgYWRkTmV3Q2FyZChlbGVtZW50LmxpbmssIGVsZW1lbnQubmFtZSk7XHJcbiAgICB9KTtcclxufTtcclxuYWRkQ2FyZCgpO1xyXG5cclxuXHJcbnByb2ZpbGVDb250YWluZXIucXVlcnlTZWxlY3RvcignLmFkZC1idXR0b24nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57XHJcbiAgICBmb3JtQ2FyZC5jbGFzc0xpc3QuYWRkKCctLWFjdGl2ZScpO1xyXG4gICAgY2xvc2VGdW5jdGlvbigpO1xyXG59KTtcclxuXHJcbmZvcm1DYXJkLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChlKT0+e1xyXG4gICAgY29uc3QgdGl0bGVDYXJkID0gZm9ybUNhcmQucXVlcnlTZWxlY3RvcignI2NhcmQtdGl0bGUnKTtcclxuICAgIGNvbnN0IGxpbmtDYXJkID0gZm9ybUNhcmQucXVlcnlTZWxlY3RvcignI2NhcmQtbGluaycpO1xyXG4gICAgYWRkTmV3Q2FyZChsaW5rQ2FyZC52YWx1ZSwgdGl0bGVDYXJkLnZhbHVlKTtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIGZvcm1DYXJkLmNsYXNzTGlzdC5yZW1vdmUoJy0tYWN0aXZlJyk7XHJcbn0pO1xyXG5cclxubGV0IG9wZW5QaG90byA9IChwaG90b0xpbmssIHBob3RvVGl0bGUpID0+e1xyXG4gICAgY29uc3QgcGhvdG9UZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwaG90by10ZW1wbGF0ZScpLmNvbnRlbnQ7XHJcbiAgICBjb25zdCBwaG90b0NvbnRlbnQgPSBwaG90b1RlbXBsYXRlLnF1ZXJ5U2VsZWN0b3IoJy5waG90by1jb250ZW50JykuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgcGhvdG9Db250ZW50LnF1ZXJ5U2VsZWN0b3IoJy5waG90by1lbGVtZW50X19pbWcnKS5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBwaG90b0xpbms7XHJcbiAgICBwaG90b0NvbnRlbnQucXVlcnlTZWxlY3RvcignLnBob3RvLWVsZW1lbnRfX3RpdGxlJykudGV4dENvbnRlbnQgPSBwaG90b1RpdGxlO1xyXG4gICAgY29uc3QgY2xvc2VQaG90byA9IHBob3RvQ29udGVudC5xdWVyeVNlbGVjdG9yKCcuY2xvc2UnKTtcclxuICAgIGNsb3NlUGhvdG8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+e1xyXG4gICAgICAgIGNsb3NlUGhvdG8ucGFyZW50Tm9kZS5wYXJlbnROb2RlLnBhcmVudE5vZGUucGFyZW50Tm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGNsb3NlUGhvdG8ucGFyZW50Tm9kZS5wYXJlbnROb2RlLnBhcmVudE5vZGUucGFyZW50Tm9kZSk7XHJcbiAgICAgICAgXHJcbiAgICB9KTtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ib2R5JykucHJlcGVuZChwaG90b0NvbnRlbnQpO1xyXG59O1xyXG5sZXQgY2xpY2tQaG90byA9ICgpID0+e1xyXG4gICAgY29uc3QgcGhvdG9HcmlkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmdyaWQtZWxlbWVudF9faW1nJyk7XHJcbiAgICBmb3IgKGxldCBwaG90byBvZiBwaG90b0dyaWQpe1xyXG4gICAgICAgIHBob3RvLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PntcclxuICAgICAgICAgICAgY29uc3Qgc3JjQ29udGFpbmVyID0gcGhvdG8uc3R5bGUuYmFja2dyb3VuZEltYWdlO1xyXG4gICAgICAgICAgICBjb25zdCB0aXRsZUdyaWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ3JpZC1lbGVtZW50IC50aXRsZScpLnRleHRDb250ZW50O1xyXG4gICAgICAgICAgICBvcGVuUGhvdG8oc3JjQ29udGFpbmVyLCB0aXRsZUdyaWQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59O1xyXG5cclxuY2xpY2tQaG90bygpO1xyXG4vLyBlbmFibGVWYWxpZGF0aW9uKHtcclxuLy8gICAgIGZvcm1TZWxlY3RvcjogJy5wb3B1cF9fZm9ybScsXHJcbi8vICAgICBpbnB1dFNlbGVjdG9yOiAnLmZvcm1fX2lucHV0JyxcclxuLy8gICAgIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiAnLmZvcm1fX2J1dHRvbicsXHJcbi8vICAgICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiAnZm9ybV9fYnV0dG9uX2Rpc2FibGVkJyxcclxuLy8gICAgIGlucHV0RXJyb3JDbGFzczogJ2Zvcm1fX2lucHV0X3R5cGVfZXJyb3InLFxyXG4vLyAgICAgZXJyb3JDbGFzczogJ2Zvcm1fX2Vycm9yX3Zpc2libGUnXHJcbi8vIH0pOyBcclxuY29uc3QgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybScpO1xyXG5jb25zdCBmb3JtSW5wdXQgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX19pbnB1dCcpO1xyXG5jb25zdCBmb3JtRXJyb3IgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke2Zvcm1JbnB1dC5pZH0tZXJyb3JgKTtcclxuXHJcbmNvbnN0IHNob3dJbnB1dEVycm9yID0gKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkgPT4ge1xyXG4gIGNvbnN0IGVycm9yRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZm9ybV9faW5wdXRfdHlwZV9lcnJvcicpO1xyXG4gIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcclxuICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZm9ybV9faW5wdXQtZXJyb3JfYWN0aXZlJyk7XHJcbn07XHJcblxyXG5jb25zdCBoaWRlSW5wdXRFcnJvciA9IChmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgY29uc3QgZXJyb3JFbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdmb3JtX19pbnB1dF90eXBlX2Vycm9yJyk7XHJcbiAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2Zvcm1fX2lucHV0LWVycm9yX2FjdGl2ZScpO1xyXG4gIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xyXG59O1xyXG5cclxuY29uc3QgY2hlY2tJbnB1dFZhbGlkaXR5ID0gKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQpID0+IHtcclxuICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgc2hvd0lucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcclxuICB9IGVsc2Uge1xyXG4gICAgaGlkZUlucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCk7XHJcbiAgfVxyXG59O1xyXG5cclxuY29uc3Qgc2V0RXZlbnRMaXN0ZW5lcnMgPSAoZm9ybUVsZW1lbnQpID0+IHtcclxuICBjb25zdCBpbnB1dExpc3QgPSBBcnJheS5mcm9tKGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5mb3JtX19pbnB1dCcpKTtcclxuICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIGNoZWNrSW5wdXRWYWxpZGl0eShmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50KTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59O1xyXG5jb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKCkgPT4ge1xyXG4gIGNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZm9ybScpKTtcclxuICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xyXG4gICAgZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoZm9ybUVsZW1lbnQpO1xyXG4gIH0pO1xyXG59O1xyXG5lbmFibGVWYWxpZGF0aW9uKCk7Il19
